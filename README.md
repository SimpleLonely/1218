# 金融深度学习系统的测试策略设计与错误实证分析



### 具体任务目标

- 初步设想利用 TensorFlow 框架搭建对现货黄金价格进行预测的深度学习模型

- 进行分钟回测后，定位出模型失效状况出现的区间

- 分析其可能原因和规律，针对性地提出应对的策略。

预期成果为实现一个基于历史变动和影响因子的现货黄金价格预测的深度学习模型，以及一份金融领域深度学习范式的完善方案。



### 任务分工

##### 算法组

> 训练神经网络
>
> 模型比较择优
>
> 对照回测定位
>
> 错误分析总结

##### 数据组

> 文献阅读确定模型
>
> 获取&爬取参数
>
> 有效性分析

### 第一步：黄金预测模型建模
使用相关资产+基本面指标（长期、短期）+技术指标联合建模，考虑lstm+attention结构，选取合理的损失函数（期望收益+正则化），目标预测有效性超过所有baseline（accuracy指标以及预期收益指标）

未实现部分：feature收集，lstm+attention机制实现（目前还是mlp），炼丹（网格搜参）

### 第二步：系统失效定义
分为单点失效和区间失效
单点失效定义为单个样本预测方向错误
区间失效可以有多重定义：1）区间内正确率低于阈值，2）区间内预测收益率低于金价本身增长率或低于0，3）实际值对预测值回归，区间内预测值无法解释实际值（系数不显著）

未实现部分：区间失效3还没考虑清楚是否make sense

### 第三步：深度测试指标提取
选取典型深度学习测试指标（deepxplore，deepgauge，sadl等）（实现得越多越好）
最好还能自己提一个，但是暂时想不出来qaq

未实现部分：除了sadl之外的其他深度指标的计算

### 第四步：失效原因分析
从深度测试指标和特征分布两个方面分析。
用logistic regression拟合深度指标与失效（单点和区间分别拟合），看是否相关。如果相关，那么提示测试时要关注这些覆盖率指标；如果不相关，提示这些指标不能用于金融深度学习系统测试（论证了反例？）
特征分布上则是看是否有失效部分分布与训练集分布是否有显著差异。

未实现部分：都还没实现

### 第五步（？）：对抗攻击策略（看第四步情况考虑做不做）
如果特征分布或者深度测试指标与失效相关，考虑在测试集上对特征做处理，如添加一些扰动，置平均值，取中心对称值等等